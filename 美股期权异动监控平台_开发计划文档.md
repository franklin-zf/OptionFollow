# 美股期权异动监控平台 - 开发计划文档

**文档版本:** 1.0
**定稿日期:** 2025年10月27日
**负责人:** Eric (技术), [产品经理姓名] (产品)

---

### **1. 引言**
本文档旨在明确“美股期权异动监控平台”项目的技术实现方案、开发路径、里程碑和潜在风险。本文档基于V1.0版本的用户需求说明书（URD）编写，并经过产品与技术团队共同审核确认。所有后续的开发工作将以此文档为核心依据。

---

### **2. 技术栈选型 (Technology Stack)**

*   **数据源 (Data Source):** Polygon.io (提供实时WebSocket数据流)
*   **后端 (Backend):** Python + FastAPI
*   **前端 (Frontend):** React (Vite) + TypeScript
*   **数据库 (Database):** PostgreSQL (主数据), Redis (缓存与消息队列)
*   **实时通讯 (Real-time):** WebSockets
*   **异步任务队列 (Task Queue):** Celery + Redis
*   **UI组件库 (UI Library):** Ant Design 或 MUI
*   **部署与运维 (DevOps):** Docker, AWS (后端), Vercel (前端), GitHub Actions (CI/CD)

---

### **3. 系统架构设计 (High-Level Architecture)**

系统将采用服务分离的架构，确保高内聚、低耦合，易于扩展和维护。

1.  **数据采集服务 (Ingestion Service):** 独立进程，负责连接数据源WebSocket，接收原始数据并推送到Redis消息队列。
2.  **数据处理服务 (Processing Service):** 核心服务，监听消息队列，对数据进行清洗、格式化，并实现“买方/卖方”等业务逻辑判断，将结果分发。
3.  **核心API服务 (Core API):** 基于FastAPI，处理用户认证、管理用户设置（如未来保存的Watchlist）、提供聚合数据的查询接口。
4.  **实时推送服务 (Real-time Service):** 基于FastAPI的WebSocket，根据用户的筛选条件，从Redis或数据库实时推送处理后的数据流至客户端。
5.  **前端应用 (Frontend App):** 浏览器中运行的React应用，通过HTTP与核心API交互，通过WebSocket接收实时数据。

---

### **4. 开发阶段与里程碑 (Phased Development Plan)**

项目采用敏捷开发模式，分阶段交付，首个目标是上线一个强大的最小可行产品（MVP）。

#### **第一阶段：MVP (预计周期: 8-10周)**
*   **目标:** 实现核心的实时期权流监控、基础筛选，并提供关键的交易方向判断和个性化关注功能。

*   **里程碑 1 (第1-2周): 环境搭建与数据接入**
    *   [ ] 完成前后端项目初始化，建立代码仓库及CI/CD流程。
    *   [ ] 签订并成功接入Polygon.io的WebSocket数据源。
    *   [ ] 完成数据库（PostgreSQL, Redis）的基础设计和部署。

*   **里程碑 2 (第3-4周): 后端核心功能**
    *   [ ] 开发用户注册、登录、认证API。
    *   [ ] 实现一个基础的WebSocket服务，广播处理后的数据。
    *   [ ] **(新增)** 在数据处理服务中，实现“买方/卖方”的最佳猜测逻辑。
    *   [ ] 实现后端的“基础筛选器”逻辑。

*   **里程碑 3 (第5-6周): 前端核心界面**
    *   [ ] 开发用户登录、注册页面及主界面框架。
    *   [ ] 开发一个能高效渲染实时数据的表格/信息流组件。
    *   [ ] **(新增)** 开发前端“观察列表(Watchlist)”功能，利用`localStorage`实现股票代码的添加、删除和筛选，无需后端API。

*   **里程碑 4 (第7-8周): 前后端联动与部署**
    *   [ ] 开发前端筛选器UI，并与后端WebSocket服务联动。
    *   [ ] 将前端Watchlist与数据流筛选逻辑结合。
    *   [ ] 完成应用的Docker化，并部署到线上测试环境。
    *   [ ] **(移除)** 移除邮件警报功能。

*   **里程碑 5 (第9-10周): 测试与优化**
    *   [ ] 进行全面的端到端测试，修复Bug。
    *   [ ] 对UI/UX进行初步优化，并为关键指标添加解释性提示（Tooltips）。
    *   [ ] MVP准备上线。

#### **第二阶段：V1.1 - 功能增强 (MVP上线后)**
*   [ ] **(新增优先级)** 开发完整的智能警报系统（邮件、浏览器推送）。
*   [ ] 实现高级筛选器（成交量 > OI, 扫单识别）。
*   [ ] 开发数据聚合与统计视图（个股、大盘情绪）。
*   [ ] 实现用户筛选器模板和Watchlist的后端存储。

#### **第三阶段：V1.2 - 商业化与扩展**
*   [ ] 集成支付网关，上线订阅管理功能。
*   [ ] 进行系统性能压力测试和优化。
*   [ ] 规划和设计历史数据回测功能。

---

### **5. 风险与考量 (Risks & Mitigations)**

1.  **数据质量与成本:**
    *   **描述:** 数据源的稳定性、准确性和延迟是产品核心。
    *   **缓解:** MVP阶段使用高性价比数据源，构建灵活的数据接入层以便未来切换。
2.  **高级信号识别准确率:**
    *   **描述:** “扫单”等信号的识别依赖复杂逻辑，初期可能无法100%准确。
    *   **缓解:** 采用明确规则，在UI上向用户说明判断依据，并持续迭代优化算法。
3.  **性能瓶颈:**
    *   **描述:** 交易时段瞬时数据量巨大，可能造成性能瓶颈。
    *   **缓解:** 架构上采用消息队列削峰，充分利用异步IO和缓存。
4.  **(新增) 用户教育成本:**
    *   **描述:** 期权流分析有专业门槛，用户可能不理解数据含义。
    *   **缓解:** 在产品UI中内置解释性提示（Tooltips），并由产品团队准备相关的教程和文档。

---

### **6. 文档确认**

*   **产品经理:** _________________________ (签字/日期)
*   **全栈开发工程师:** _________________________ (签字/日期)
